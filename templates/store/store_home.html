{% extends "store/_base_store.html" %}
{% load dealer_extras %}
{% block title %}{{ store_copy.page_title|default:"BGM — Products" }}{% endblock %}

{% block marketing_meta %}
  {% with meta_title=store_copy.meta_title|default:"BGM Customs — Storefront" meta_description=store_copy.meta_description|default:"Shop curated parts, aero, lighting, and performance upgrades from BGM Customs." meta_section="store" %}
    {% include "includes/marketing_head.html" %}
  {% endwith %}
{% endblock %}

{% block body %}
<div id="bg"></div>

<section class="hero hero--store">
  <div class="container hero__inner">
    <div class="hero__copy">
      <h1 class="title">{{ store_copy.hero_title }}</h1>
      <p class="lead">{{ store_copy.hero_lead }}</p>
      <div class="btn-row">
        <a class="btn btn--primary" href="{% url 'client-dashboard' %}">{{ store_copy.hero_primary_cta_label }}</a>
        <a class="btn btn--ghost" href="{% url 'store-cart' %}">{{ store_copy.hero_secondary_cta_label }}</a>
      </div>
    </div>

    <div class="hero__media frame frame--media">
      <img src="{{ hero_media.src }}" alt="{{ hero_media.alt|default:'Products hero' }}" loading="lazy" decoding="async">
      <p class="hero__disclaimer">{{ hero_media.caption|default:store_copy.hero_disclaimer_fallback|default:"Product may not appear exactly as shown." }}</p>
    </div>
  </div>
</section>


<section class="section">
  <div class="container">

    {# ================== FILTERS ================== #}
    <div class="filters-wrap" data-filters>
      <div class="filters-toolbar">
        <button type="button"
                class="filters-toggle"
                data-filters-toggle
                aria-expanded="false"
                aria-controls="catalogFilters">
          <span>{{ store_copy.filters_toggle_label }}</span>
          {% if filters_active %}
            <span class="filters-toggle__badge">{{ store_copy.filters_active_badge }}</span>
          {% endif %}
        </button>
        {% if filters_active %}
          <a class="filters-toolbar__clear" href="{% url 'store' %}">{{ store_copy.filters_reset_label }}</a>
        {% endif %}
      </div>

      <form id="catalogFilters"
            method="get"
            class="card filters"
            tabindex="-1"
            aria-labelledby="filtersHeading">
        <div class="filters__drawer-head">
          <h3 class="filters__drawer-title" id="filtersHeading">{{ store_copy.filters_heading }}</h3>
          <button type="button" class="filters__close" data-filters-close>{{ store_copy.filters_close_label }}</button>
        </div>
        <div class="filters__grid">
          <div class="filters__item">
            <label>{{ store_copy.filters_category_label }}</label>
            {{ filter_form.category }}
          </div>
          <div class="filters__item">
            <label>{{ store_copy.filters_make_label }}</label>
            {{ filter_form.make }}
          </div>
          <div class="filters__item">
            <label>{{ store_copy.filters_model_label }}</label>
            {{ filter_form.model }}
          </div>
          <div class="filters__item">
            <label>{{ store_copy.filters_year_label }}</label>
            {{ filter_form.year }}
          </div>
        </div>
        <div class="filters__actions">
          <button class="btn btn--primary" type="submit">{{ store_copy.filters_apply_label }}</button>
          <a class="btn btn--ghost" href="{% url 'store' %}">{{ store_copy.filters_clear_label }}</a>
        </div>
      </form>

      <div class="filters-backdrop" data-filters-backdrop></div>
    </div>

    {# ================== CATEGORIES ================== #}
    <div class="section__head">
      <div>
        <h2 class="section__title">{{ store_copy.categories_title }}</h2>
        <p class="section__desc">{{ store_copy.categories_desc }}</p>
      </div>
    </div>

    <div class="grid grid--cards">
      {% for c in categories %}
        <a class="card cat" href="{% url 'store-category' slug=c.slug %}" title="{{ c.name }}">
          <div class="card__img cat__img">
            {% if c.image %}
              <img src="{{ c.image.url }}" alt="{{ c.display_name }}" loading="lazy">
            {% else %}
              <div class="ph" aria-hidden="true"></div>
            {% endif %}
            <div class="cat__overlay">
              <span class="cat__title">{{ c.display_name }}</span>
              <span class="cat__arrow" aria-hidden="true">→</span>
            </div>
          </div>
          {% if c.description %}
            <p class="section__desc cat__desc">{{ c.description|truncatewords:18 }}</p>
          {% endif %}
        </a>
      {% empty %}
        <p class="section__desc">{{ store_copy.categories_empty_label }}</p>
      {% endfor %}
    </div>

    {# ================== RESULTS (visible when filters are active) ================== #}
    {% if filters_active %}
      <div class="section__head" style="margin-top:1.6rem">
        <div>
          <h2 class="section__title">{{ store_copy.results_title }}</h2>
          <p class="section__desc">{{ store_copy.results_desc }}</p>
        </div>
      </div>

      <div class="grid grid--cards">
        {% for p in products %}
          <article class="card product">
            <a class="product__link" href="{% url 'store-product' slug=p.slug %}">
              <div class="card__img">
                {% if p.main_image %}
                  <img src="{{ p.main_image_url }}" alt="{{ p.name }}" loading="lazy" class="img-fit">
                {% elif p.image %}
                  <img src="{{ p.image.url }}" alt="{{ p.name }}" loading="lazy" class="img-fit">
                {% else %}
                  <div class="ph" aria-hidden="true"></div>
                {% endif %}
              </div>
              <div class="product__meta">
                <h3 class="product__title">{{ p.name }}</h3>
                <p class="section__desc product__desc">{{ p.short_description|default:p.category.display_name }}</p>
                <div class="price price--stacked">
                  {% if p.contact_for_estimate %}
                    <strong>{{ store_copy.contact_for_estimate_label }}</strong>
                    {% if p.estimate_from_price %}<span class="price__hint">{{ store_copy.from_label }} {{ p.estimate_from_price|money }}</span>{% endif %}
                  {% else %}
                    <div class="price__retail-row">
                      {% if p.has_option_price_overrides %}<span class="price__hint">{{ store_copy.from_label }}</span>{% endif %}
                      <strong>{{ p.display_price|money }}</strong>
                      {% if p.old_price %}<span class="old">{{ p.old_price|money }}</span>{% endif %}
                    </div>
                    {% if dealer_portal.show_discount %}
                      <div class="price__dealer-row">
                        <span class="price__hint">{{ store_copy.dealer_label }} {{ dealer_portal.discount_percent }}%</span>
                        <strong>{{ p.display_price|dealer_price:dealer_portal.discount_percent|money }}</strong>
                        <span class="price__save">{{ store_copy.save_label }} {{ p.display_price|dealer_savings:dealer_portal.discount_percent|money }}</span>
                      </div>
                    {% endif %}
                  {% endif %}
                </div>
              </div>
            </a>
          </article>
        {% empty %}
          <p class="section__desc">{{ store_copy.results_empty_label }}</p>
        {% endfor %}
      </div>
    {% endif %}

    {# ================== NEW ARRIVALS ================== #}
    {% if new_arrivals %}
      <div class="section__head" style="margin-top:2rem">
        <div><h2 class="section__title">{{ store_copy.new_arrivals_title }}</h2></div>
        <a class="btn btn--ghost" href="{% url 'store-cart' %}">{{ store_copy.new_arrivals_cart_label }}</a>
      </div>

      <div class="grid grid--cards">
        {% for p in new_arrivals %}
          <article class="card product">
            <a class="product__link" href="{% url 'store-product' slug=p.slug %}">
              <div class="card__img">
                {% if p.main_image %}
                  <img src="{{ p.main_image_url }}" alt="{{ p.name }}" loading="lazy" class="img-fit">
                {% elif p.image %}
                  <img src="{{ p.image.url }}" alt="{{ p.name }}" loading="lazy" class="img-fit">
                {% else %}
                  <div class="ph" aria-hidden="true"></div>
                {% endif %}
              </div>
              <div class="product__meta">
                <h3 class="product__title">{{ p.name }}</h3>
                <p class="section__desc product__desc">{{ p.short_description|default:p.category.display_name }}</p>
                <div class="price price--stacked">
                  {% if p.contact_for_estimate %}
                    <strong>{{ store_copy.contact_for_estimate_label }}</strong>
                    {% if p.estimate_from_price %}<span class="price__hint">{{ store_copy.from_label }} {{ p.estimate_from_price|money }}</span>{% endif %}
                  {% else %}
                    <div class="price__retail-row">
                      {% if p.has_option_price_overrides %}<span class="price__hint">{{ store_copy.from_label }}</span>{% endif %}
                      <strong>{{ p.display_price|money }}</strong>
                      {% if p.old_price %}<span class="old">{{ p.old_price|money }}</span>{% endif %}
                    </div>
                    {% if dealer_portal.show_discount %}
                      <div class="price__dealer-row">
                        <span class="price__hint">{{ store_copy.dealer_label }} {{ dealer_portal.discount_percent }}%</span>
                        <strong>{{ p.display_price|dealer_price:dealer_portal.discount_percent|money }}</strong>
                        <span class="price__save">{{ store_copy.save_label }} {{ p.display_price|dealer_savings:dealer_portal.discount_percent|money }}</span>
                      </div>
                    {% endif %}
                  {% endif %}
                </div>
              </div>
            </a>
          </article>
        {% endfor %}
      </div>
    {% endif %}

    {# ================== BROWSE BY CATEGORY (sections) ================== #}
    <div class="section__head" style="margin-top:1.8rem">
      <div>
        <h2 class="section__title">{{ store_copy.browse_title }}</h2>
        <p class="section__desc">{{ store_copy.browse_desc }}</p>
      </div>
    </div>

    {% for cat, items in sections %}
      <div class="section__head" style="margin-top:1rem">
        <div><h3 class="section__title" style="font-size:1.1rem">{{ cat.name }}</h3></div>
        <div><a class="btn btn--ghost" href="{% url 'store-category' slug=cat.slug %}">{{ store_copy.browse_view_all_label }}</a></div>
      </div>
      <div class="grid grid--cards">
        {% for p in items %}
          <article class="card product">
            <a class="product__link" href="{% url 'store-product' slug=p.slug %}">
              <div class="card__img">
                {% if p.main_image %}
                  <img src="{{ p.main_image_url }}" alt="{{ p.name }}" loading="lazy" class="img-fit">
                {% elif p.image %}
                  <img src="{{ p.image.url }}" alt="{{ p.name }}" loading="lazy" class="img-fit">
                {% else %}
                  <div class="ph" aria-hidden="true"></div>
                {% endif %}
              </div>
              <div class="product__meta">
                <h3 class="product__title">{{ p.name }}</h3>
                <p class="section__desc product__desc">{{ p.short_description|default:p.category.display_name }}</p>
                <div class="price price--stacked">
                  {% if p.contact_for_estimate %}
                    <strong>{{ store_copy.contact_for_estimate_label }}</strong>
                    {% if p.estimate_from_price %}<span class="price__hint">{{ store_copy.from_label }} {{ p.estimate_from_price|money }}</span>{% endif %}
                  {% else %}
                    <div class="price__retail-row">
                      {% if p.has_option_price_overrides %}<span class="price__hint">{{ store_copy.from_label }}</span>{% endif %}
                      <strong>{{ p.display_price|money }}</strong>
                      {% if p.old_price %}<span class="old">{{ p.old_price|money }}</span>{% endif %}
                    </div>
                    {% if dealer_portal.show_discount %}
                      <div class="price__dealer-row">
                        <span class="price__hint">{{ store_copy.dealer_label }} {{ dealer_portal.discount_percent }}%</span>
                        <strong>{{ p.display_price|dealer_price:dealer_portal.discount_percent|money }}</strong>
                        <span class="price__save">{{ store_copy.save_label }} {{ p.display_price|dealer_savings:dealer_portal.discount_percent|money }}</span>
                      </div>
                    {% endif %}
                  {% endif %}
                </div>
              </div>
            </a>
          </article>
        {% endfor %}
      </div>
    {% endfor %}
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script src="{% static 'admin/js/bgm-smoke.js' %}"></script>
<script>
(function(){
  const host = document.querySelector('[data-filters]');
  if (!host) return;

  const panel = host.querySelector('.filters');
  const toggle = host.querySelector('[data-filters-toggle]');
  const closeEls = host.querySelectorAll('[data-filters-close]');
  const backdrop = host.querySelector('[data-filters-backdrop]');
  const mq = window.matchMedia('(max-width: 900px)');
  let previousFocus = null;

  if (panel && !panel.hasAttribute('tabindex')) {
    panel.setAttribute('tabindex', '-1');
  }

  const isMobile = () => mq.matches;

  const trapKeydown = (event) => {
    if (!host.classList.contains('filters--open')) return;
    if (event.key === 'Escape') {
      event.preventDefault();
      closeDrawer();
      return;
    }
    if (event.key !== 'Tab' || !panel) return;
    const focusables = Array.from(
      panel.querySelectorAll('a,button,input,select,textarea,[tabindex]:not([tabindex="-1"])')
    ).filter(el => !el.disabled && !el.getAttribute('aria-hidden'));
    if (!focusables.length) return;
    const first = focusables[0];
    const last = focusables[focusables.length - 1];
    if (event.shiftKey && document.activeElement === first) {
      event.preventDefault();
      last.focus();
    } else if (!event.shiftKey && document.activeElement === last) {
      event.preventDefault();
      first.focus();
    }
  };

  const openDrawer = () => {
    if (!panel || !isMobile()) return;
    previousFocus = document.activeElement;
    host.classList.add('filters--open');
    document.body.classList.add('filters-drawer-open');
    if (toggle) {
      toggle.setAttribute('aria-expanded', 'true');
    }
    document.addEventListener('keydown', trapKeydown);
    requestAnimationFrame(() => {
      try {
        panel.focus({ preventScroll: true });
      } catch (err) {
        panel.focus();
      }
    });
  };

  const closeDrawer = ({ restoreFocus = true } = {}) => {
    host.classList.remove('filters--open');
    document.body.classList.remove('filters-drawer-open');
    if (toggle) {
      toggle.setAttribute('aria-expanded', 'false');
    }
    document.removeEventListener('keydown', trapKeydown);
    if (restoreFocus && previousFocus) {
      try {
        previousFocus.focus({ preventScroll: true });
      } catch (err) {
        previousFocus.focus();
      }
    }
  };

  if (toggle) {
    toggle.addEventListener('click', () => {
      if (host.classList.contains('filters--open')) {
        closeDrawer();
      } else {
        openDrawer();
      }
    });
  }

  closeEls.forEach(btn => btn.addEventListener('click', () => closeDrawer()));
  if (backdrop) {
    backdrop.addEventListener('click', () => closeDrawer());
  }

  const handleMq = (event) => {
    if (!event.matches) {
      closeDrawer({ restoreFocus: false });
    }
  };
  if (mq.addEventListener) {
    mq.addEventListener('change', handleMq);
  } else if (mq.addListener) {
    mq.addListener(handleMq);
  }
})();
</script>

  </div>
</section>

<style>
  .hero--store {background: linear-gradient(180deg, rgba(213,0,0,.06), transparent 60%);}
  .hero__copy .btn-row{display:flex;gap:.6rem;margin-top:1.2rem;flex-wrap:wrap}
  .hero__live{display:flex;align-items:center;justify-content:center;min-height:110px}

  .grid--cards{--min:260px;display:grid;grid-template-columns:repeat(auto-fill,minmax(var(--min),1fr));gap:1rem}
  .card{background:var(--card-bg);border:1px solid var(--card-border);border-radius:1rem;box-shadow:0 6px 20px rgba(0,0,0,.25);transition:transform .18s ease, box-shadow .18s ease}
  .card:hover{transform:translateY(-2px);box-shadow:0 10px 26px rgba(0,0,0,.33)}
  .card__img{position:relative;overflow:hidden;border-radius:.9rem}
  .img-fit{width:100%;height:100%;object-fit:cover;aspect-ratio:16/9;display:block}

  /* Filters */
  .filters-wrap{position:relative;margin-bottom:1.2rem}
  .filters-toolbar{
    display:none;
    align-items:center;
    justify-content:space-between;
    gap:.6rem;
    margin-bottom:.8rem;
  }
  .filters-toggle{
    display:inline-flex;
    align-items:center;
    gap:.45rem;
    border-radius:.75rem;
    border:1px solid var(--card-border);
    background:var(--card-bg);
    padding:.65rem 1rem;
    font-weight:800;
    letter-spacing:.04em;
    cursor:pointer;
  }
  .filters-toggle__badge{
    font-size:.75rem;
    border-radius:999px;
    padding:.1rem .5rem;
    background:rgba(213,0,0,.16);
    border:1px solid rgba(213,0,0,.4);
  }
  .filters-toolbar__clear{
    display:none;
    font-weight:700;
    color:var(--muted);
  }
  .filters-backdrop{display:none;}
  .filters{padding:1rem;background:var(--card-bg);border:1px solid var(--card-border);margin-bottom:1.2rem}
  .filters__grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:.8rem}
  .filters__item label{display:block;margin:0 0 .35rem .1rem;color:var(--muted);font-size:.9rem}
  .filters__actions{display:flex;gap:.6rem;margin-top:.8rem}
  .filters select,.filters input{
    width:100%; background:var(--field-bg); color:var(--fg);
    border:1px solid var(--card-border); border-radius:.6rem; padding:.55rem .7rem;
  }
  .filters select option,
  .filters select optgroup{
    background:#f2f2f2;
    color:#111;
  }
  .filters__drawer-head{display:none;align-items:center;justify-content:space-between;gap:.8rem;margin-bottom:1rem}
  .filters__drawer-title{font-size:1.1rem;font-weight:800}
  .filters__close{
    display:none;
    border:1px solid var(--card-border);
    background:transparent;
    color:var(--ink);
    padding:.4rem .9rem;
    border-radius:.6rem;
    font-weight:700;
  }

  /* Categories */
  .cat{display:block;padding:.6rem}
  .cat__img img{width:100%;height:100%;object-fit:cover;aspect-ratio:16/9;display:block;filter:saturate(1.02)}
  .cat__overlay{
    position:absolute;inset:auto 0 0 0;display:flex;align-items:center;justify-content:space-between;
    padding:.7rem .9rem;background:linear-gradient(180deg, transparent, rgba(0,0,0,.55));
  }
  .cat__title{font-weight:700;color:var(--ink)}
  .cat__arrow{opacity:.9;transform:translateX(0);transition:transform .18s ease}
  .cat:hover .cat__arrow{transform:translateX(3px)}
  .cat__desc{margin:.5rem .25rem 0}

  /* Product */
  .card.product{display:flex;flex-direction:column;height:100%}
  .product__link{display:flex;flex-direction:column;flex:1;min-height:100%;color:inherit;text-decoration:none}
  .product__meta{padding:.7rem .8rem;display:flex;flex-direction:column;flex:1}
  .product__title{margin:.6rem 0 0}
  .price{margin-top:.35rem;display:flex;gap:.5rem;align-items:baseline}
  .price--stacked{flex-direction:column;align-items:flex-start;gap:.3rem}
  .product__meta .price{margin-top:auto;padding-top:.35rem}
  .price__retail-row{display:flex;gap:.45rem;align-items:baseline}
  .price__dealer-row{
    display:inline-flex;
    gap:.35rem;
    align-items:baseline;
    flex-wrap:wrap;
    background:rgba(213,0,0,.12);
    border:1px solid rgba(213,0,0,.35);
    border-radius:.6rem;
    padding:.2rem .5rem;
  }
  .price__hint{font-size:.75rem;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:.08em;}
  .price .old{color:var(--muted);text-decoration:line-through}
  .price__save{font-size:.78rem;color:var(--muted)}

  /* Skeleton */
  .ph{
    border-radius:.8rem;width:100%;height:100%;aspect-ratio:16/9;
    background:
      radial-gradient(600px 260px at 10% -10%, rgba(213,0,0,.18), transparent 60%),
      linear-gradient(90deg,#111,#151515,#111);
    background-size:200% 100%;animation:sh 1.2s ease-in-out infinite;
  }
  @keyframes sh{0%{background-position:200% 0}100%{background-position:-200% 0}}

  /* дым — слой позади всего */
#bg{position:fixed; inset:0; z-index:0; pointer-events:none;}
#bg canvas{position:absolute; inset:0; width:100%; height:100%; display:block;}

/* весь контент поверх дыма */
.site-header, .hero, .section, footer{position:relative; z-index:1;}

/* убираем прежний фон у hero */
.hero--store{ background:transparent !important; }
.hero__inner{
  display:grid;
  grid-template-columns: 1.1fr .9fr;
  align-items:center;
  gap:1.2rem;
}

.hero__media{
  justify-self:start;
  max-width:min(52vw, 720px);
  position:relative;
}

.hero__media img{
  width:100%;
  height:auto;
  aspect-ratio:16/9;
  max-height:clamp(220px, 42vh, 420px);
  object-fit:cover;
  border-radius:1rem;
  display:block;
}
.hero__disclaimer{
  position:absolute;
  left:1.1rem;
  bottom:1.1rem;
  padding:.35rem .9rem;
  border-radius:.85rem;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(0,0,0,.6);
  color:rgba(255,255,255,.82);
  font-size:.72rem;
  letter-spacing:.12em;
  text-transform:uppercase;
  display:inline-flex;
  align-items:center;
  gap:.45rem;
  backdrop-filter:blur(6px);
}
.hero__disclaimer::before{
  content:"";
  width:18px;
  height:1px;
  background:rgba(255,255,255,.45);
  flex-shrink:0;
}

/* мобилка */
@media (max-width: 900px){
  .filters-toolbar{display:flex;}
  .filters-toolbar__clear{display:inline-flex;}
  .filters{
    position:fixed;
    top:0;
    right:0;
    bottom:0;
    width:min(420px,92vw);
    max-width:92vw;
    border-radius:0;
    margin-bottom:0;
    transform:translateX(100%);
    transition:transform .28s ease;
    z-index:120;
    overflow-y:auto;
  }
  .filters-wrap.filters--open .filters{transform:translateX(0);}
  .filters-backdrop{
    display:block;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.65);
    backdrop-filter:blur(2px);
    opacity:0;
    pointer-events:none;
    transition:opacity .2s ease;
    z-index:110;
  }
  .filters-wrap.filters--open .filters-backdrop{
    opacity:1;
    pointer-events:auto;
  }
  .filters__drawer-head,
  .filters__close{display:flex;}
  body.filters-drawer-open{overflow:hidden;}
  .hero__inner{ grid-template-columns:1fr; }
  .hero__media{ order:2; max-width:100%; }
  .hero__disclaimer{position:static;margin-top:.85rem;padding:.4rem .85rem;backdrop-filter:none}
}

@media (max-width: 900px){
  .section__head{flex-direction:column;align-items:flex-start;gap:.6rem;}
  .grid--cards{grid-template-columns:1fr;}
  .hero__copy .btn-row{flex-direction:column;}
  .hero__copy .btn-row .btn{width:100%;justify-content:center;}
  .filters__grid{grid-template-columns:1fr;}
  .filters__actions{flex-direction:column;}
  .filters__actions .btn{width:100%;justify-content:center;}
  .product__meta{padding:.9rem;}
  .product__desc{
    display:-webkit-box;
    -webkit-line-clamp:2;
    -webkit-box-orient:vertical;
    overflow:hidden;
  }
  .cat__desc{
    display:-webkit-box;
    -webkit-line-clamp:2;
    -webkit-box-orient:vertical;
    overflow:hidden;
  }
}
@media (max-width: 600px){
  .product__title{font-size:1.05rem;}
  .price__dealer-row{width:100%;}
}

/* дым оставляем позади */
.hero--store{ background:transparent !important; }

</style>

<style id="store-hero-title-fix">
/* делаем заголовок обычным регистром и чуть компактнее */
.hero--store .title{
  text-transform:none !important;           /* убираем капс */
  font-family: var(--font-head) !important; /* тот же шрифт, что и раньше (Ford) */
  font-weight: 900;
  letter-spacing: .01em;                    /* меньше трекинг */
  font-size: clamp(2rem, 5vw, 3.2rem) !important; /* читабельный кегль */
  line-height: 1.15;
  text-shadow: none;                        /* если где-то задан — убираем лишний блур */
}

/* если капс прилетает откуда-то ещё (на всех h1.h/title) — прибьём локально */
.hero--store h1.title{ text-transform:none !important; }
</style>
<style id="topbar-brand-diesel">
  /* принудительно как на Merch */
  .site-header .brand,
  .site-header .brand__word{
    font-family: var(--font-body) !important;  /* Diesel */
    font-style: normal !important;
    text-transform: uppercase !important;
    letter-spacing: .06em !important;
    font-variant-ligatures: none;              /* на всякий случай */
  }
</style>
<style id="topbar-logo-bigger">
  /* логотип в топбаре — крупнее */
  .site-header .brand__word{
    font-size: clamp(1.1rem, 1.55vw, 1.4rem) !important; /* было ~1rem */
    line-height: 1 !important;
    letter-spacing: .06em; /* как и было, для фирменного вида */
  }
  /* чуть увеличим расстояние между словами, если нужно */
  .site-header .brand{ gap: .65rem !important; }
</style>

{% endblock %}
