{# Shared promo banner markup — v1 #}
{% load lead_security %}
{% with site_notice_version=site_notice_version|default:"offer-v1" %}
<div id="siteNotice"
     class="site-notice"
     role="dialog"
     aria-modal="true"
     aria-labelledby="siteNoticeTitle"
     aria-describedby="siteNoticeDescription"
     data-version="{{ site_notice_version }}"
     hidden>

  <div class="site-notice__panel" role="document">
    <span class="site-notice__bgflare" aria-hidden="true"></span>

    <header class="site-notice__header">
      <div class="site-notice__eyebrow">
        <span class="site-notice__dot" aria-hidden="true"></span>
        <span>Email exclusive</span>
      </div>

      <!-- Кнопка закрытия (иконка) -->
      <button type="button"
              class="site-notice__close"
              data-notice-dismiss
              aria-label="Close notice">
        <svg viewBox="0 0 24 24" class="site-notice__close-icon" aria-hidden="true">
          <path d="M6 6l12 12M18 6L6 18" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </header>

    <h2 id="siteNoticeTitle" class="site-notice__title">Welcome gift: 5% off your first order</h2>

    <p id="siteNoticeDescription" class="site-notice__desc site-notice__desc--lead">
      Join the Bad Guy Motors email list for product drops, garage inspo, and VIP invites.
      We'll email a one-time 5% off code as soon as you subscribe.
    </p>

    <form class="site-notice__form" id="siteNoticeForm" aria-label="Email signup form" method="post" action="{% url 'site-notice-signup' %}">
      {% csrf_token %}
      {% lead_security_fields "site_notice" %}
      <label class="site-notice__label" for="siteNoticeEmail">Email address</label>
      <div class="site-notice__input-row">
        <input type="email"
               id="siteNoticeEmail"
               name="email"
               class="site-notice__input"
               placeholder="you@example.com"
               required>
        <button type="submit" class="site-notice__cta site-notice__cta--solid">
          Send me the code
        </button>
      </div>
      <p class="site-notice__fineprint">No spam—just drops, events, and the occasional perk.</p>
      <p class="site-notice__status" data-notice-status aria-live="polite" hidden></p>
    </form>

    <section class="site-notice__perks" aria-label="Perks for subscribers">
      <div class="site-notice__perk">
        <span class="site-notice__perk-icon" aria-hidden="true">✓</span>
        <div>
          <p class="site-notice__perk-title">One-time 5% welcome code</p>
          <p class="site-notice__perk-desc">Good on any product or service invoice.</p>
        </div>
      </div>

      <div class="site-notice__perk">
        <span class="site-notice__perk-icon" aria-hidden="true">✓</span>
        <div>
          <p class="site-notice__perk-title">Early access</p>
          <p class="site-notice__perk-desc">Be first to hear about limited builds, gear, and events.</p>
        </div>
      </div>

      <div class="site-notice__perk">
        <span class="site-notice__perk-icon" aria-hidden="true">✓</span>
        <div>
          <p class="site-notice__perk-title">Direct inbox</p>
          <p class="site-notice__perk-desc">
            Need help? Reply to any email and the crew will jump in fast.
          </p>
        </div>
      </div>
    </section>

    <div class="site-notice__actions">
      <button type="button" class="site-notice__cta site-notice__cta--ghost" data-notice-dismiss>
        Maybe later
      </button>
    </div>

    <p class="site-notice__sub">
      Prefer texting? Call <a href="tel:+14035250432" class="site-notice__link">403-525-0432</a>
      or email <a href="mailto:support@badguymotors.com" class="site-notice__link">support@badguymotors.com</a>.
    </p>
  </div>
</div>
{% endwith %}
