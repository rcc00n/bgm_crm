{% extends "base_site.html" %}
{% load static %}

{% block content %}
<section class="section">
  <div class="container">
    <h1 class="section__title">BGM Store</h1>
    <p class="section__desc">Catalog of parts and upgrades.</p>

    {% for category in categories %}
      <h2 style="margin-top:1.5rem">{{ category.name }}</h2>
      <div class="grid grid--cards">
        {% for product in category.product_set.all %}
          <article class="card">
            {% if product.image %}
              <img class="card__img" src="{{ product.image.url }}" alt="{{ product.name }}">
            {% endif %}
            <h3 style="margin-top:.6rem">{{ product.name }}</h3>
            <p class="section__desc">{{ product.description|truncatewords:20 }}</p>
            <p><strong>{% if product.has_option_price_overrides %}From {% endif %}${{ product.display_price|floatformat:2 }}</strong></p>
            <a class="btn btn--primary" href="#">Order</a>
          </article>
        {% empty %}
          <p class="section__desc">No products in this category yet.</p>
        {% endfor %}
      </div>
    {% empty %}
      <p>Categories have not been created yet.</p>
    {% endfor %}
  </div>
</section>
{% endblock %}
