:root{
    --calendar-bg:#050505;
    --calendar-surface:#0f0f0f;
    --calendar-ink:#f4f4f4;
    --calendar-muted:rgba(244,244,244,.7);
    --calendar-line:rgba(255,255,255,.12);
    --calendar-grid:rgba(255,255,255,.16);
    --calendar-red:#d50000;
    --calendar-red-dark:#b30000;
    --calendar-radius-lg:20px;
    --calendar-radius-md:12px;
    --calendar-shadow:0 22px 50px rgba(0,0,0,.65);
    --time-col-width:4.25rem;
    --calendar-cell-width:11rem;
    --tap-target:36px;
    font-size:14px;
}

@media (prefers-color-scheme: light){
    :root{
        --calendar-bg:#f4f4f6;
        --calendar-surface:#ffffff;
        --calendar-ink:#0b0b0f;
        --calendar-muted:#666a78;
        --calendar-line:rgba(8,8,10,.12);
        --calendar-grid:rgba(8,8,10,.16);
        --calendar-shadow:0 22px 50px rgba(7,7,12,.14);
    }
}

*,
*::before,
*::after{
    box-sizing:border-box;
}

html,body{
    height:100%;
    margin:0;
    font-family:"Inter","Segoe UI",system-ui,-apple-system,BlinkMacSystemFont,"Roboto",sans-serif;
    background:var(--calendar-bg);
    color:var(--calendar-ink);
}

body{
    overflow:hidden;
}

@media (min-width: 992px){
    body.sidebar-mini.sidebar-collapse .content-wrapper{
        margin-left:84px !important;
    }
}

:focus-visible{
    outline:2px solid var(--calendar-red);
    outline-offset:2px;
    border-radius:10px;
}

.content-wrapper{
    min-height:100%;
    display:flex;
    flex-direction:column;
}

.content{
    flex:1;
    display:flex;
    flex-direction:column;
    width:100% !important;
    max-width:100% !important;
    padding:0 !important;
    margin:0 auto;
    background:var(--calendar-bg);
    min-height:0;
}

.content.border-bottom.mb-2{
    display:none !important;
}

.calendar-shell{
    width:100%;
    background:var(--calendar-bg);
}

.calendar-nav{
    display:flex;
    flex-wrap:wrap;
    align-items:center;
    justify-content:space-between;
    gap:1rem;
    padding:clamp(1rem,2vw,1.6rem);
    background:var(--calendar-surface);
    border-bottom:1px solid var(--calendar-line);
    box-shadow:0 12px 32px rgba(0,0,0,.45);
    position:sticky;
    top:0;
    z-index:5;
}

.calendar-left,
.calendar-right{
    display:flex;
    align-items:center;
    gap:clamp(.65rem,2vw,1.25rem);
    flex-wrap:wrap;
}

.nav-btn,
.nav-icon2,
.add-appointment-btn,
.apply-btn,
.clear-btn,
.popup-action,
.fake-date-picker,
.add-dropdown-menu a{
    min-height:var(--tap-target);
    display:inline-flex;
    align-items:center;
    justify-content:center;
    gap:.45rem;
    font-weight:600;
    border-radius:999px;
    transition:.2s ease;
    cursor:pointer;
    font-size:.95rem;
    line-height:1.1;
}

.nav-btn{
    padding:0 1.45rem;
    border:1px solid var(--calendar-line);
    background:var(--calendar-surface);
    color:var(--calendar-ink);
}
.nav-btn:hover{ border-color:var(--calendar-muted); }

.nav-group{
    display:flex;
    border:1px solid var(--calendar-line);
    border-radius:999px;
    overflow:hidden;
    background:var(--calendar-surface);
}

.view-toggle{
    display:flex;
    border:1px solid var(--calendar-line);
    border-radius:999px;
    overflow:hidden;
    background:var(--calendar-surface);
}

.view-btn{
    border:none;
    background:transparent;
    color:var(--calendar-ink);
    padding:0 1rem;
    min-height:var(--tap-target);
    font-weight:700;
    font-size:.85rem;
    cursor:pointer;
    transition:.2s ease;
}

.view-btn:hover{
    background:rgba(255,255,255,.08);
}

.view-btn.active{
    background:rgba(255,255,255,.12);
    color:var(--calendar-red);
}

.nav-icon2{
    border:none;
    background:transparent;
    color:var(--calendar-ink);
    padding:0 1.25rem;
}
.nav-icon2:hover{ background:rgba(255,255,255,.08); }

.fake-date-picker{
    border:none;
    padding:0 1.5rem;
    font-weight:700;
    background:rgba(255,255,255,.08);
    color:var(--calendar-ink);
    position:relative;
}
.fake-date-picker input[type="date"]{
    position:absolute;
    inset:0;
    opacity:0;
    cursor:pointer;
}

.add-appointment-btn{
    padding:0 1.6rem;
    border:none;
    color:#fff;
    background:linear-gradient(120deg,var(--calendar-red),var(--calendar-red-dark));
    font-weight:800;
    box-shadow:0 18px 35px rgba(213,0,0,.25);
}
.add-appointment-btn:hover{
    filter:brightness(1.05);
    transform:translateY(-1px);
}

.add-dropdown{
    position:relative;
}

.add-dropdown-menu{
    position:absolute;
    right:0;
    top:calc(100% + .25rem);
    background:var(--calendar-surface);
    border:1px solid var(--calendar-line);
    border-radius:var(--calendar-radius-md);
    box-shadow:var(--calendar-shadow);
    min-width:clamp(220px,35vw,280px);
    padding:.4rem 0;
    z-index:20;
}

.add-dropdown-menu a{
    width:100%;
    justify-content:flex-start;
    padding:0 1.2rem;
    color:var(--calendar-ink);
    text-decoration:none;
}
.add-dropdown-menu a:hover{
    background:rgba(255,255,255,.08);
}

.hidden{
    display:none !important;
}

#calendar-container{
    flex:1;
    display:flex;
    flex-direction:column;
    min-height:0;
    background:var(--calendar-surface);
}

.scrollable{
    width:100%;
    flex:1;
    min-height:0;
    overflow:auto;
    max-height:100%;
    overscroll-behavior:contain;
    scrollbar-gutter:stable;
    background:var(--calendar-surface);
    border-top:1px solid var(--calendar-line);
    --calendar-cell-width:calc((100% - var(--time-col-width)) / var(--master-count, 1));
}

.calendar-table{
    width:100%;
    border-collapse:collapse;
    font-size:.85rem;
    min-width:100%;
    table-layout:fixed;
}

.calendar-table th,
.calendar-table td{
    border-right:1px solid var(--calendar-grid);
    border-bottom:1px solid var(--calendar-grid);
    padding:.2rem;
    height:2.4rem;
    vertical-align:top;
    background:transparent;
    min-width:0;
}

.calendar-table thead th{
    position:sticky;
    top:0;
    background:var(--calendar-bg);
    z-index:2;
    text-align:center;
    font-size:.8rem;
    font-weight:700;
    letter-spacing:.02em;
}

.calendar-table th.time-col,
.calendar-table td.time-col{
    width:var(--time-col-width);
    min-width:var(--time-col-width);
    background:rgba(255,255,255,.05);
    text-align:center;
    font-weight:700;
    color:var(--calendar-muted);
    position:sticky;
    left:0;
    z-index:3;
}

.master-col,
.day-col{
    width:var(--calendar-cell-width);
    min-width:0;
}

.master-header{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:.3rem;
    padding:.45rem .25rem;
}

.initials-circle{
    width:2.2rem;
    height:2.2rem;
    border-radius:50%;
    display:grid;
    place-items:center;
    font-weight:800;
    background:rgba(213,0,0,.14);
    color:var(--calendar-red);
    border:2px solid rgba(213,0,0,.3);
}

.master-name{
    font-size:.8rem;
    font-weight:700;
    color:var(--calendar-ink);
}

.calendar-cell{
    position:relative;
    width:100%;
    height:100%;
    cursor:pointer;
}

.calendar-cell:hover{
    background:rgba(213,0,0,.08);
}

.calendar-cell.active{
    background:rgba(213,0,0,.14);
    border-radius:10px;
}

.cell-label{
    font-size:.7rem;
    font-weight:600;
    display:inline-flex;
    align-items:center;
    line-height:1.2;
    color:var(--calendar-red-dark);
    gap:.25rem;
}

.event,
.unavailable-cell{
    padding:.2rem;
    background:transparent;
}

.event>div,
.unavailable-cell>div{
    width:100%;
    min-height:100%;
    border-radius:12px;
    padding:.4rem .5rem;
    display:flex;
    flex-direction:column;
    gap:.15rem;
    text-align:left;
    box-shadow:0 6px 16px rgba(0,0,0,.12);
    color:#0f0f10;
    font-weight:600;
    font-size:.8rem;
    line-height:1.3;
}

.event>div:hover,
.unavailable-cell>div:hover{
    box-shadow:0 10px 24px rgba(0,0,0,.18);
}

.unavailable-cell>div{
    background:#a4adba;
}

.calendar-table tbody tr:nth-child(4n) td{
    border-bottom:2px solid rgba(255,255,255,.1);
}

.week-table .day-header{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:.15rem;
    padding:.4rem .2rem;
}

.day-name{
    font-size:.75rem;
    font-weight:700;
    color:var(--calendar-muted);
    text-transform:uppercase;
    letter-spacing:.05em;
}

.day-date{
    font-size:.85rem;
    font-weight:700;
    color:var(--calendar-ink);
}

.week-cell{
    vertical-align:top;
    position:relative;
}

.week-event,
.month-event{
    display:flex;
    flex-direction:column;
    gap:.1rem;
    border-radius:10px;
    padding:.3rem .45rem;
    text-decoration:none;
    color:#0f0f10;
    font-weight:600;
    font-size:.75rem;
    box-shadow:0 6px 12px rgba(0,0,0,.12);
    margin-bottom:.2rem;
    position:relative;
    z-index:1;
}

.event[draggable="true"],
.event-card[draggable="true"]{
    cursor:grab;
}

.week-slot{
    position:absolute;
    inset:0;
    z-index:0;
}

.drop-hover{
    outline:2px dashed rgba(213,0,0,.35);
    outline-offset:-2px;
}

.dragging{
    opacity:.65;
    cursor:grabbing;
}

.week-event-time{
    font-size:.7rem;
    font-weight:800;
}

.week-event-meta{
    font-size:.7rem;
    opacity:.75;
}

.calendar-month .month-grid{
    display:grid;
    grid-template-columns:repeat(7, minmax(0, 1fr));
    gap:1px;
    background:var(--calendar-grid);
    padding:1px;
}

.month-header-cell{
    background:var(--calendar-bg);
    padding:.45rem .5rem;
    font-size:.75rem;
    font-weight:700;
    text-transform:uppercase;
    letter-spacing:.06em;
    color:var(--calendar-muted);
    text-align:center;
    position:sticky;
    top:0;
    z-index:2;
}

.month-day-cell{
    background:var(--calendar-surface);
    min-height:6.5rem;
    padding:.4rem;
    display:flex;
    flex-direction:column;
    gap:.35rem;
    cursor:pointer;
}

.month-day-cell.out-month{
    opacity:.5;
}

.month-day-cell:hover{
    background:rgba(213,0,0,.04);
}

.month-day-top{
    display:flex;
    justify-content:flex-end;
}

.month-day-number{
    font-size:.8rem;
    font-weight:700;
    color:var(--calendar-ink);
}

.month-events{
    display:flex;
    flex-direction:column;
    gap:.2rem;
}

.month-event{
    flex-direction:row;
    align-items:center;
    gap:.35rem;
    font-size:.7rem;
}

.month-event-time{
    font-weight:800;
    font-size:.68rem;
}

.month-event-title{
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
}

.month-more{
    font-size:.7rem;
    color:var(--calendar-muted);
    font-weight:700;
}

.sidebar2{
    position:fixed;
    top:0;
    right:0;
    width:min(26rem,90vw);
    height:100%;
    background:var(--calendar-surface);
    border-left:1px solid var(--calendar-line);
    padding:clamp(1rem,2vw,1.75rem);
    box-shadow:-18px 0 40px rgba(7,7,12,.16);
    transform:translateX(100%);
    opacity:0;
    transition:transform .35s ease, opacity .25s ease;
    z-index:30;
    overflow-y:auto;
}

.sidebar2.visible{
    transform:translateX(0);
    opacity:1;
}

.sidebar2.hidden{
    display:none;
}

.sidebar-header2{
    display:flex;
    align-items:center;
    justify-content:space-between;
    font-weight:800;
    font-size:1.1rem;
    margin-bottom:1.2rem;
}

.close-btn2{
    border:none;
    background:rgba(255,255,255,.08);
    width:2.5rem;
    height:2.5rem;
    border-radius:50%;
    cursor:pointer;
}

.filter-section{
    border-bottom:1px solid var(--calendar-line);
    padding:1rem 0;
}

.filter-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    cursor:pointer;
    font-weight:700;
    gap:.5rem;
}

.filter-content{
    padding:.75rem 0 0;
}

.filter-content select{
    width:100%;
    height:var(--tap-target);
    border-radius:var(--calendar-radius-md);
    border:1px solid var(--calendar-line);
    background:rgba(255,255,255,.08);
    color:var(--calendar-ink);
    padding:0 1rem;
    font-weight:600;
}

.checkbox-wrapper{
    display:flex;
    align-items:center;
    gap:.75rem;
    margin-bottom:.5rem;
    font-weight:500;
    color:var(--calendar-ink);
}

.checkbox-wrapper input[type="checkbox"]{
    width:1.1rem;
    height:1.1rem;
    accent-color:var(--calendar-red);
}

.apply-btn{
    width:100%;
    border:none;
    background:linear-gradient(120deg,var(--calendar-red),var(--calendar-red-dark));
    color:#fff;
    font-weight:800;
    box-shadow:0 16px 30px rgba(213,0,0,.25);
}
.clear-btn{
    width:100%;
    border:1px solid rgba(213,0,0,.35);
    color:var(--calendar-red);
    background:transparent;
}

.filter-footer{
    display:flex;
    flex-direction:column;
    gap:.75rem;
    margin-top:1rem;
}

.popup{
    position:absolute;
    z-index:40;
    background:var(--calendar-surface);
    border:1px solid var(--calendar-line);
    border-radius:var(--calendar-radius-md);
    box-shadow:var(--calendar-shadow);
    min-width:min(20rem, 92vw);
    max-width:20rem;
    overflow:hidden;
}

.popup.hidden{ display:none; }

.popup-header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:.85rem 1rem;
    background:rgba(255,255,255,.08);
    font-weight:700;
}

.popup-close{
    border:none;
    background:transparent;
    cursor:pointer;
    font-size:1.2rem;
}

.popup-body{
    display:flex;
    flex-direction:column;
    padding:.4rem;
    gap:.35rem;
}

.popup-action{
    border:none;
    background:transparent;
    justify-content:flex-start;
    padding:0 1.25rem;
    color:var(--calendar-ink);
}
.popup-action:hover{
    background:rgba(255,255,255,.08);
}

.popup-action--rich{
    width:100%;
    border-radius:14px;
    padding:.65rem .8rem;
    gap:.75rem;
    align-items:flex-start;
    background:rgba(255,255,255,.04);
    border:1px solid rgba(255,255,255,.08);
    text-align:left;
}

.popup-action--rich:hover{
    background:rgba(255,255,255,.08);
    border-color:rgba(255,255,255,.14);
}

.popup-action__icon{
    width:2.25rem;
    height:2.25rem;
    border-radius:14px;
    display:grid;
    place-items:center;
    flex:0 0 auto;
    font-weight:900;
    background:rgba(213,0,0,.14);
    color:var(--calendar-red);
    border:1px solid rgba(213,0,0,.18);
}

.popup-action--primary .popup-action__icon{
    background:linear-gradient(120deg,var(--calendar-red),var(--calendar-red-dark));
    border-color:rgba(255,255,255,.14);
    color:#fff;
}

.popup-action__content{
    display:flex;
    flex-direction:column;
    gap:.15rem;
    min-width:0;
}

.popup-action__title{
    font-weight:850;
    font-size:.95rem;
    letter-spacing:.01em;
}

.popup-action__desc{
    font-weight:650;
    font-size:.78rem;
    color:var(--calendar-muted);
    line-height:1.2;
}

.qa-overlay{
    position:fixed;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:clamp(.85rem,2vw,1.4rem);
    background:rgba(0,0,0,.55);
    backdrop-filter:blur(10px);
    z-index:60;
}

.qa-overlay.hidden{
    display:none !important;
}

.qa-dialog{
    width:min(46rem, 96vw);
    max-height:min(86vh, 58rem);
    overflow:auto;
    background:var(--calendar-surface);
    border:1px solid var(--calendar-line);
    border-radius:var(--calendar-radius-lg);
    box-shadow:var(--calendar-shadow);
}

.qa-head{
    padding:1.15rem 1.2rem 1rem;
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap:1rem;
    background:linear-gradient(120deg,var(--calendar-red),var(--calendar-red-dark));
    color:#fff;
}

.qa-head__meta{
    min-width:0;
}

.qa-kicker{
    font-size:.72rem;
    font-weight:850;
    letter-spacing:.12em;
    text-transform:uppercase;
    opacity:.9;
}

.qa-title{
    font-size:1.35rem;
    font-weight:950;
    letter-spacing:.01em;
    margin-top:.25rem;
}

.qa-sub{
    margin-top:.25rem;
    font-size:.93rem;
    font-weight:650;
    opacity:.9;
}

.qa-close{
    width:2.6rem;
    height:2.6rem;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.25);
    background:rgba(255,255,255,.18);
    color:#fff;
    cursor:pointer;
    font-size:1.2rem;
    display:grid;
    place-items:center;
    flex:0 0 auto;
}

.qa-close:hover{
    background:rgba(255,255,255,.24);
}

.qa-body{
    padding:1.1rem 1.2rem 1.25rem;
    display:flex;
    flex-direction:column;
    gap:1rem;
}

.qa-grid{
    display:grid;
    gap:.85rem;
}

.qa-grid--2{
    grid-template-columns:repeat(2, minmax(0, 1fr));
}

.qa-field{
    display:flex;
    flex-direction:column;
    gap:.35rem;
}

.qa-field--full{
    grid-column:1 / -1;
}

.qa-label{
    font-size:.74rem;
    font-weight:850;
    letter-spacing:.12em;
    text-transform:uppercase;
    color:var(--calendar-muted);
}

.qa-input,
.qa-select{
    height:44px;
    width:100%;
    border-radius:14px;
    border:1px solid var(--calendar-line);
    background:rgba(255,255,255,.06);
    color:var(--calendar-ink);
    padding:0 .95rem;
    font-weight:700;
    outline:none;
    transition:border-color .2s ease, box-shadow .2s ease, background .2s ease;
}

.qa-input:focus,
.qa-select:focus{
    border-color:rgba(213,0,0,.55);
    box-shadow:0 0 0 4px rgba(213,0,0,.18);
    background:rgba(255,255,255,.09);
}

.qa-hint{
    margin-top:.1rem;
    font-size:.82rem;
    font-weight:600;
    color:var(--calendar-muted);
}

.qa-client{
    position:relative;
}

.qa-results{
    position:absolute;
    left:0;
    right:0;
    top:calc(100% + .35rem);
    background:var(--calendar-surface);
    border:1px solid var(--calendar-line);
    border-radius:14px;
    box-shadow:var(--calendar-shadow);
    padding:.35rem;
    max-height:15rem;
    overflow:auto;
    z-index:2;
}

.qa-result{
    width:100%;
    display:flex;
    flex-direction:column;
    gap:.1rem;
    padding:.6rem .7rem;
    border-radius:12px;
    border:1px solid transparent;
    background:rgba(255,255,255,.03);
    color:var(--calendar-ink);
    cursor:pointer;
    text-align:left;
}

.qa-result:hover{
    background:rgba(255,255,255,.08);
    border-color:rgba(255,255,255,.10);
}

.qa-result__title{
    font-weight:850;
}

.qa-result__meta{
    font-size:.78rem;
    font-weight:650;
    color:var(--calendar-muted);
}

.qa-errors{
    border-radius:14px;
    border:1px solid rgba(213,0,0,.35);
    background:rgba(213,0,0,.10);
    padding:.75rem .85rem;
    font-weight:700;
}

.qa-errors.hidden{
    display:none !important;
}

.qa-actions{
    display:flex;
    justify-content:flex-end;
    gap:.65rem;
    padding-top:.25rem;
}

.qa-btn{
    min-height:44px;
    padding:0 1.2rem;
    border-radius:999px;
    font-weight:900;
    cursor:pointer;
    border:1px solid transparent;
    transition:.2s ease;
}

.qa-btn--ghost{
    background:transparent;
    color:var(--calendar-ink);
    border-color:var(--calendar-line);
}

.qa-btn--ghost:hover{
    background:rgba(255,255,255,.06);
}

.qa-btn--primary{
    background:linear-gradient(120deg,var(--calendar-red),var(--calendar-red-dark));
    color:#fff;
    box-shadow:0 18px 35px rgba(213,0,0,.25);
}

.qa-btn--primary:hover{
    filter:brightness(1.05);
    transform:translateY(-1px);
}

.qa-btn[disabled]{
    opacity:.6;
    cursor:not-allowed;
    transform:none;
    filter:none;
}

@media (prefers-color-scheme: light){
    .qa-input,
    .qa-select{
        background:rgba(8,8,10,.03);
    }
    .qa-input:focus,
    .qa-select:focus{
        background:rgba(8,8,10,.02);
    }
    .qa-result{
        background:rgba(8,8,10,.02);
    }
    .qa-result:hover{
        background:rgba(8,8,10,.05);
    }
    .qa-btn--ghost:hover{
        background:rgba(8,8,10,.04);
    }
}

@media (max-width: 640px){
    .qa-grid--2{
        grid-template-columns:1fr;
    }
    .qa-field--full{
        grid-column:1 / -1;
    }
}

#apptTooltip{
    position:absolute;
    z-index:50;
    pointer-events:none;
}

#apptTooltip.visible{
    opacity:1;
    transform:translateY(0);
    visibility:visible;
}

#apptTooltip.hidden{
    opacity:0;
    transform:translateY(6px);
    visibility:hidden;
}

.tooltip-card{
    width:min(320px,80vw);
    background:var(--calendar-surface);
    border-radius:var(--calendar-radius-lg);
    box-shadow:var(--calendar-shadow);
    border:1px solid var(--calendar-line);
    overflow:hidden;
    display:flex;
    flex-direction:column;
}

.tooltip-header{
    background:linear-gradient(120deg,var(--calendar-red),var(--calendar-red-dark));
    color:#fff;
    padding:1rem 1.2rem;
    font-weight:700;
    display:flex;
    justify-content:space-between;
    gap:1rem;
}

.tooltip-body{
    padding:1.1rem 1.2rem 1.4rem;
    display:flex;
    flex-direction:column;
    gap:.85rem;
    color:var(--calendar-ink);
}

.tooltip-client{
    display:flex;
    align-items:center;
    gap:.85rem;
}

.tooltip-avatar{
    width:3rem;
    height:3rem;
    border-radius:50%;
    background:rgba(213,0,0,.16);
    color:var(--calendar-red);
    font-weight:800;
    font-size:1.2rem;
    display:grid;
    place-items:center;
}

.tooltip-footer{
    display:flex;
    justify-content:space-between;
    gap:.5rem;
    font-weight:700;
    align-items:flex-end;
}

.tooltip-meta{
    color:var(--calendar-muted);
    font-size:.85rem;
}

#bg{
    display:none;
}

@media (max-width: 900px){
    .calendar-nav{
        position:static;
        border-radius:0;
    }
    .calendar-left,
    .calendar-right{
        width:100%;
        justify-content:flex-start;
    }
    .scrollable{
        max-height:100%;
        min-height:0;
    }
    .calendar-table{
        font-size:.9rem;
    }
}

@media (max-width: 640px){
    .nav-group{
        width:100%;
    }
    .view-toggle{
        width:100%;
    }
    .view-btn{
        flex:1;
    }
    .fake-date-picker{
        flex:1;
        justify-content:flex-start;
    }
    .nav-btn{
        flex:1;
    }
}
