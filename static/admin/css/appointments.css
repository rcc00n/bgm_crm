:root{
    --calendar-bg:#050505;
    --calendar-surface:#0f0f0f;
    --calendar-ink:#f4f4f4;
    --calendar-muted:rgba(244,244,244,.7);
    --calendar-line:rgba(255,255,255,.12);
    --calendar-grid:rgba(255,255,255,.16);
    --calendar-red:#d50000;
    --calendar-red-dark:#b30000;
    --calendar-radius-lg:20px;
    --calendar-radius-md:12px;
    --calendar-shadow:0 22px 50px rgba(0,0,0,.65);
    --time-col-width:5.5rem;
    --calendar-cell-width:14rem;
    --tap-target:44px;
    font-size:16px;
}

@media (prefers-color-scheme: light){
    :root{
        --calendar-bg:#f4f4f6;
        --calendar-surface:#ffffff;
        --calendar-ink:#0b0b0f;
        --calendar-muted:#666a78;
        --calendar-line:rgba(8,8,10,.12);
        --calendar-grid:rgba(8,8,10,.16);
        --calendar-shadow:0 22px 50px rgba(7,7,12,.14);
    }
}

*,
*::before,
*::after{
    box-sizing:border-box;
}

html,body{
    height:100%;
    margin:0;
    font-family:"Inter","Segoe UI",system-ui,-apple-system,BlinkMacSystemFont,"Roboto",sans-serif;
    background:var(--calendar-bg);
    color:var(--calendar-ink);
}

:focus-visible{
    outline:2px solid var(--calendar-red);
    outline-offset:2px;
    border-radius:10px;
}

.content-wrapper{
    min-height:100%;
    display:flex;
    flex-direction:column;
}

.content{
    flex:1;
    display:flex;
    flex-direction:column;
    width:100% !important;
    max-width:100% !important;
    padding:0 !important;
    margin:0 auto;
    background:var(--calendar-bg);
}

.content.border-bottom.mb-2{
    display:none !important;
}

.calendar-shell{
    width:100%;
    background:var(--calendar-bg);
}

.calendar-nav{
    display:flex;
    flex-wrap:wrap;
    align-items:center;
    justify-content:space-between;
    gap:1rem;
    padding:clamp(1rem,2vw,1.6rem);
    background:var(--calendar-surface);
    border-bottom:1px solid var(--calendar-line);
    box-shadow:0 12px 32px rgba(0,0,0,.45);
    position:sticky;
    top:0;
    z-index:5;
}

.calendar-left,
.calendar-right{
    display:flex;
    align-items:center;
    gap:clamp(.65rem,2vw,1.25rem);
    flex-wrap:wrap;
}

.nav-btn,
.nav-icon2,
.add-appointment-btn,
.apply-btn,
.clear-btn,
.popup-action,
.fake-date-picker,
.add-dropdown-menu a{
    min-height:var(--tap-target);
    display:inline-flex;
    align-items:center;
    justify-content:center;
    gap:.45rem;
    font-weight:600;
    border-radius:999px;
    transition:.2s ease;
    cursor:pointer;
    font-size:1rem;
    line-height:1.1;
}

.nav-btn{
    padding:0 1.45rem;
    border:1px solid var(--calendar-line);
    background:var(--calendar-surface);
    color:var(--calendar-ink);
}
.nav-btn:hover{ border-color:var(--calendar-muted); }

.nav-group{
    display:flex;
    border:1px solid var(--calendar-line);
    border-radius:999px;
    overflow:hidden;
    background:var(--calendar-surface);
}

.nav-icon2{
    border:none;
    background:transparent;
    color:var(--calendar-ink);
    padding:0 1.25rem;
}
.nav-icon2:hover{ background:rgba(255,255,255,.08); }

.fake-date-picker{
    border:none;
    padding:0 1.5rem;
    font-weight:700;
    background:rgba(255,255,255,.08);
    color:var(--calendar-ink);
    position:relative;
}
.fake-date-picker input[type="date"]{
    position:absolute;
    inset:0;
    opacity:0;
    cursor:pointer;
}

.add-appointment-btn{
    padding:0 1.6rem;
    border:none;
    color:#fff;
    background:linear-gradient(120deg,var(--calendar-red),var(--calendar-red-dark));
    font-weight:800;
    box-shadow:0 18px 35px rgba(213,0,0,.25);
}
.add-appointment-btn:hover{
    filter:brightness(1.05);
    transform:translateY(-1px);
}

.add-dropdown{
    position:relative;
}

.add-dropdown-menu{
    position:absolute;
    right:0;
    top:calc(100% + .25rem);
    background:var(--calendar-surface);
    border:1px solid var(--calendar-line);
    border-radius:var(--calendar-radius-md);
    box-shadow:var(--calendar-shadow);
    min-width:clamp(220px,35vw,280px);
    padding:.4rem 0;
    z-index:20;
}

.add-dropdown-menu a{
    width:100%;
    justify-content:flex-start;
    padding:0 1.2rem;
    color:var(--calendar-ink);
    text-decoration:none;
}
.add-dropdown-menu a:hover{
    background:rgba(255,255,255,.08);
}

.hidden{
    display:none !important;
}

#calendar-container{
    flex:1;
    background:var(--calendar-surface);
}

.scrollable{
    width:100%;
    overflow:auto;
    max-height:min(86vh, 920px);
    overscroll-behavior:contain;
    background:var(--calendar-surface);
    border-top:1px solid var(--calendar-line);
}

.calendar-table{
    width:100%;
    border-collapse:collapse;
    font-size:.95rem;
    min-width:calc(var(--time-col-width) + var(--calendar-cell-width) * var(--master-count, 1));
}

.calendar-table th,
.calendar-table td{
    border-right:1px solid var(--calendar-grid);
    border-bottom:1px solid var(--calendar-grid);
    padding:.35rem;
    height:3.2rem;
    vertical-align:top;
    background:transparent;
}

.calendar-table thead th{
    position:sticky;
    top:0;
    background:var(--calendar-bg);
    z-index:2;
    text-align:center;
    font-size:.85rem;
    font-weight:700;
    letter-spacing:.02em;
}

.calendar-table th.time-col,
.calendar-table td.time-col{
    width:var(--time-col-width);
    min-width:var(--time-col-width);
    background:rgba(255,255,255,.05);
    text-align:center;
    font-weight:700;
    color:var(--calendar-muted);
    position:sticky;
    left:0;
    z-index:3;
}

.master-col{
    min-width:var(--calendar-cell-width);
}

.master-header{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:.45rem;
    padding:.75rem .25rem;
}

.initials-circle{
    width:3.25rem;
    height:3.25rem;
    border-radius:50%;
    display:grid;
    place-items:center;
    font-weight:800;
    background:rgba(213,0,0,.14);
    color:var(--calendar-red);
    border:2px solid rgba(213,0,0,.3);
}

.master-name{
    font-size:.95rem;
    font-weight:700;
    color:var(--calendar-ink);
}

.calendar-cell{
    position:relative;
    width:100%;
    height:100%;
    cursor:pointer;
}

.calendar-cell:hover{
    background:rgba(213,0,0,.08);
}

.calendar-cell.active{
    background:rgba(213,0,0,.14);
    border-radius:10px;
}

.cell-label{
    font-size:.8rem;
    font-weight:600;
    display:inline-flex;
    align-items:center;
    line-height:1.2;
    color:var(--calendar-red-dark);
    gap:.25rem;
}

.event,
.unavailable-cell{
    padding:.2rem;
    background:transparent;
}

.event>div,
.unavailable-cell>div{
    width:100%;
    min-height:100%;
    border-radius:12px;
    padding:.55rem .75rem;
    display:flex;
    flex-direction:column;
    gap:.15rem;
    text-align:left;
    box-shadow:0 6px 16px rgba(0,0,0,.12);
    color:#0f0f10;
    font-weight:600;
    font-size:.9rem;
    line-height:1.3;
}

.event>div:hover,
.unavailable-cell>div:hover{
    box-shadow:0 10px 24px rgba(0,0,0,.18);
}

.unavailable-cell>div{
    background:#a4adba;
}

.calendar-table tbody tr:nth-child(4n) td{
    border-bottom:2px solid rgba(255,255,255,.1);
}

.sidebar2{
    position:fixed;
    top:0;
    right:0;
    width:min(26rem,90vw);
    height:100%;
    background:var(--calendar-surface);
    border-left:1px solid var(--calendar-line);
    padding:clamp(1rem,2vw,1.75rem);
    box-shadow:-18px 0 40px rgba(7,7,12,.16);
    transform:translateX(100%);
    opacity:0;
    transition:transform .35s ease, opacity .25s ease;
    z-index:30;
    overflow-y:auto;
}

.sidebar2.visible{
    transform:translateX(0);
    opacity:1;
}

.sidebar2.hidden{
    display:none;
}

.sidebar-header2{
    display:flex;
    align-items:center;
    justify-content:space-between;
    font-weight:800;
    font-size:1.1rem;
    margin-bottom:1.2rem;
}

.close-btn2{
    border:none;
    background:rgba(255,255,255,.08);
    width:2.5rem;
    height:2.5rem;
    border-radius:50%;
    cursor:pointer;
}

.filter-section{
    border-bottom:1px solid var(--calendar-line);
    padding:1rem 0;
}

.filter-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    cursor:pointer;
    font-weight:700;
    gap:.5rem;
}

.filter-content{
    padding:.75rem 0 0;
}

.filter-content select{
    width:100%;
    height:var(--tap-target);
    border-radius:var(--calendar-radius-md);
    border:1px solid var(--calendar-line);
    background:rgba(255,255,255,.08);
    color:var(--calendar-ink);
    padding:0 1rem;
    font-weight:600;
}

.checkbox-wrapper{
    display:flex;
    align-items:center;
    gap:.75rem;
    margin-bottom:.5rem;
    font-weight:500;
    color:var(--calendar-ink);
}

.checkbox-wrapper input[type="checkbox"]{
    width:1.1rem;
    height:1.1rem;
    accent-color:var(--calendar-red);
}

.apply-btn{
    width:100%;
    border:none;
    background:linear-gradient(120deg,var(--calendar-red),var(--calendar-red-dark));
    color:#fff;
    font-weight:800;
    box-shadow:0 16px 30px rgba(213,0,0,.25);
}
.clear-btn{
    width:100%;
    border:1px solid rgba(213,0,0,.35);
    color:var(--calendar-red);
    background:transparent;
}

.filter-footer{
    display:flex;
    flex-direction:column;
    gap:.75rem;
    margin-top:1rem;
}

.popup{
    position:absolute;
    z-index:40;
    background:var(--calendar-surface);
    border:1px solid var(--calendar-line);
    border-radius:var(--calendar-radius-md);
    box-shadow:var(--calendar-shadow);
    min-width:min(20rem, 92vw);
    max-width:20rem;
    overflow:hidden;
}

.popup.hidden{ display:none; }

.popup-header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:.85rem 1rem;
    background:rgba(255,255,255,.08);
    font-weight:700;
}

.popup-close{
    border:none;
    background:transparent;
    cursor:pointer;
    font-size:1.2rem;
}

.popup-body{
    display:flex;
    flex-direction:column;
}

.popup-action{
    border:none;
    background:transparent;
    justify-content:flex-start;
    padding:0 1.25rem;
    color:var(--calendar-ink);
}
.popup-action:hover{
    background:rgba(255,255,255,.08);
}

#apptTooltip{
    position:absolute;
    z-index:50;
    pointer-events:none;
}

#apptTooltip.visible{
    opacity:1;
    transform:translateY(0);
    visibility:visible;
}

#apptTooltip.hidden{
    opacity:0;
    transform:translateY(6px);
    visibility:hidden;
}

.tooltip-card{
    width:min(320px,80vw);
    background:var(--calendar-surface);
    border-radius:var(--calendar-radius-lg);
    box-shadow:var(--calendar-shadow);
    border:1px solid var(--calendar-line);
    overflow:hidden;
    display:flex;
    flex-direction:column;
}

.tooltip-header{
    background:linear-gradient(120deg,var(--calendar-red),var(--calendar-red-dark));
    color:#fff;
    padding:1rem 1.2rem;
    font-weight:700;
    display:flex;
    justify-content:space-between;
    gap:1rem;
}

.tooltip-body{
    padding:1.1rem 1.2rem 1.4rem;
    display:flex;
    flex-direction:column;
    gap:.85rem;
    color:var(--calendar-ink);
}

.tooltip-client{
    display:flex;
    align-items:center;
    gap:.85rem;
}

.tooltip-avatar{
    width:3rem;
    height:3rem;
    border-radius:50%;
    background:rgba(213,0,0,.16);
    color:var(--calendar-red);
    font-weight:800;
    font-size:1.2rem;
    display:grid;
    place-items:center;
}

.tooltip-footer{
    display:flex;
    justify-content:space-between;
    gap:.5rem;
    font-weight:700;
    align-items:flex-end;
}

.tooltip-meta{
    color:var(--calendar-muted);
    font-size:.85rem;
}

#bg{
    display:none;
}

@media (max-width: 900px){
    .calendar-nav{
        position:static;
        border-radius:0;
    }
    .calendar-left,
    .calendar-right{
        width:100%;
        justify-content:flex-start;
    }
    .scrollable{
        max-height:none;
        min-height:60vh;
    }
    .calendar-table{
        font-size:.9rem;
    }
}

@media (max-width: 640px){
    .nav-group{
        width:100%;
    }
    .fake-date-picker{
        flex:1;
        justify-content:flex-start;
    }
    .nav-btn{
        flex:1;
    }
}
